---
작성일: "2023-08-10 23:28"
링크: https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=276041776
---
#개발서적 #대규모시스템설계기초
## 연결문서
- [[index-1장 사용자 수에 따른 규모 확장성]]

## 정리
CDN은 정적 콘텐츠를 전송 하는데 쓰이는 지리적으로 분산된 서버의 네트워크이다.  
이미지, 비디오, html, css, js 파일 등을 캐시할 수 있다.

동적 콘텐츠 캐싱도 존재하는데 상대적으로 새로운 개념이며 간단하게 원리를 설명하면 request path, query string, cookie, request header등의 정보를 기반으로 하여 HTML 페이지를 캐싱하는 것이다.
![2020230814154403.png|500](./images/Pasted%20image%2020230814154403.png)

CDN의 대표적인 서비스는 AWS의 Cloudfront가 있다. 
CDN의 동작을 간단하게 보면 아래와 같다.
1. 클라이언트가 이미지를 서울에서 요청을 한다. 
2. 서울 CDN 서버에서 캐시에서 해당 이미지가 있는지 확인한다. 있다면 바로 응답한다.
3. 없다면 정적 호스트 서버에 이미지를 요청하여 응답 받는다.
4. 응답된 HTTP 헤더에 파일이 얼마나 오래 캐시 될 수 있는지 설명하는 TTL(Time-To-Live)값을 확인한다.
5. CDN 서버는 TTL시간 만큼 캐싱하고 이미지를 클라이언트에 응답한다.

### CDN 사용 시 고려해야 할 사항
1. 비용: CDN은 전송량 많큼 비용이 되기 때문에 캐싱이 필요없는 자원은 CDN 캐싱에서 뺴는 것도 비용을 줄이는 방법이다.
2. 적절한 만료시간 설정
3. CDN 장애에 대한 대처 방안: 
   CDN 자체가 죽는 경우 서비스를 못하게 되는 경우 서비스가 죽지 않게 대처하는 것이 필요하다.
   일시적으로 CDN을 통하지 않고 원본 서버에서 직접 응답하도록 변경하는 것도 방법이다.


### CDN과 캐시가 까지 적용된 설계안 
![2020230814154448.png|500](./images/Pasted%20image%2020230814154448.png)