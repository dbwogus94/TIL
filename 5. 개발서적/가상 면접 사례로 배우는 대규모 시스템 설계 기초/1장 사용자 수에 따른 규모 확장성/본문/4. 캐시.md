---
작성일: "2023-08-10 23:05"
링크: https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=276041776
---
#개발서적 #대규모시스템설계기초
## 연결문서
- [[../1장 사용자 수에 따른 규모 확장성]]

## 정리
웹서비스에서는 웹 페이지를 새로고침 할 때마다 한 번 이상의 데이터베이스 호출이 발생한다.  
앱의 성능은 데이터베이스를 얼마나 자주 호출 하느냐에 크게 좌우되는데, 캐시는 그런 문제를 완화시킨다.
### 캐시 계층
앞서 단일 서버를 웹 계층과 데이터 계층으로 쪼게 성능을 올리는 방법을 알아보았다.  
웹 계층과 데이터 계층 사이에 캐시 계층을 추가로 두게 됨으로 성능상의 이점 뿐만 아니라 데이터 계층의 부하를 줄 일 수 있다.  
![2020230814154257.png| 500](images/Pasted%20image%2020230814154257.png)

정리하면 아래와 같다
1. 웹 계층에 요청이 들어온다.
2. 웹 계층은 캐시 계층에 먼저 질의 한다. 존재하면 응답한다.
3. 존재하지 않는다면 데이터 계층에 질의하여 응답한다.

그리고 이러한 캐싱 방법을 주로 읽기 주도형 캐시 전략(read-through caching strategy)이라고 한다.
### 캐시 사용 시 유의할 점
- 캐시는 데이터 갱신이 자주 일어나지 않는 조회는 많이 발생하는 데이터에 사용하는 것이 적합하다.
- 캐시는 휘발성 메모리에 저장하기 때문에 영속적으로 보관할 데이터를 캐시에 두지 말아야 한다.
- 적절한 만료 정책이 필요하다. 만료가 너무 늦게 되면 실제 데이터와 차이가 발생한다.
- 일관성 유지에 대한 정책이 필요하다. 캐시된 데이터와 영속화된 데이터간에 차이가 발생하지 않도록 해야한다.
- 장애 대처가 필요하다. 한대의 캐시서버는 자칫 단일 장애지점(SPOF)가 될 수 있으며, 캐시 서버도 다중화가 필요하다.
- 캐시 메모리 크기에 대한 정책이 필요하다.
- 데이터 방출 정책이 필요하다. 마지막에 사용된 데이터 제거(LRU), 빈도가 낮은 데이터 제거(LFU), 선입선출(FIFO)
